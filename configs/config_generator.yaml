# ===================================================================
#      EventMamba-FX Data Generator Configuration 
# ===================================================================
#
# ğŸ¯ ä¸“æ³¨æ•°æ®ç”Ÿæˆ (Generate Mode Only)
# ç”¨äºç”Ÿæˆäº‹ä»¶ç›¸æœºç‚«å…‰æ•°æ®é›†ï¼ŒåŒ…å«DSECèƒŒæ™¯äº‹ä»¶å’ŒDVSä»¿çœŸç‚«å…‰äº‹ä»¶
#
# ==================================================================

# --- è¿è¡Œè®¾ç½® (Run Settings) ---
run:
  mode: generate         # å›ºå®šä¸ºgenerateæ¨¡å¼
  experiment_name: event_flare_data_generator

# --- æ•°æ®ç®¡çº¿è®¾ç½® (Data Pipeline Settings) ---
data_pipeline:
  mode: 'generate'       # å›ºå®šä¸ºç”Ÿæˆæ¨¡å¼
  h5_archive_path: 'data/generated_h5'  # ç”Ÿæˆæ•°æ®å­˜å‚¨è·¯å¾„
  num_workers: 0         # ç”Ÿæˆæ¨¡å¼å¿…é¡»ä¸º0 (å•è¿›ç¨‹å®‰å…¨)
  
# --- æ•°æ®é›†è®¾ç½® (Data Settings) ---
data:
  # èƒŒæ™¯äº‹ä»¶æ•°æ®è·¯å¾„ (DSEC H5æ–‡ä»¶ç›®å½•)
  dsec_path: "data/bg_events"
  
  # Flare7Kæ•°æ®é›†è·¯å¾„ (ç‚«å…‰å›¾åƒæ•°æ®)
  flare7k_path: "/mnt/e/2025/physical_deflare/Datasets/Flare7Kpp/Flare7Kpp"
  
  # äº‹ä»¶ä»¿çœŸå™¨é…ç½® (åªä¿ç•™DVS-Voltmeter)
  event_simulator:
    type: "dvs_voltmeter"
    
    # DVS-Voltmeter é…ç½®
    dvs_voltmeter:
      simulator_path: "/mnt/e/2025/event_flick_flare/main/simulator/DVS-Voltmeter-main"
      timeout_sec: 60
      
      # DVSå‚æ•° (åŸºäºç‰©ç†åŸç†ä¼˜åŒ–)
      parameters:
        # k1é™ä½å…‰-ç”µè½¬æ¢æ•æ„Ÿåº¦ï¼Œå‡å°‘ç‚«å…‰äº‹ä»¶å¼ºåº¦
        dvs346_k: [2.5, 20, 0.0001, 1e-7, 5e-9, 0.00001]
        dvs240_k: [4.424, 23, 0.0002, 1e-7, 5e-8, 0.00001]
  
  # éšæœºåŒ–è®­ç»ƒæ•°æ®ç”Ÿæˆç­–ç•¥
  randomized_training:
    # èƒŒæ™¯äº‹ä»¶éšæœºé•¿åº¦èŒƒå›´
    background_duration_range: [0.05, 0.1]      # 50-100ms
    
    # è®­ç»ƒé›†åå‘è®¾ç½®
    background_contains_flare_prob: 0.75    # 75%æƒ…å†µä¸‹èƒŒæ™¯åŒ…å«ç‚«å…‰
    flare_only_prob: 0.1                    # 10%åªæœ‰ç‚«å…‰äº‹ä»¶
    background_only_prob: 0.15              # 15%åªæœ‰èƒŒæ™¯äº‹ä»¶
    
  # åˆæˆflareäº‹ä»¶çš„å‚æ•° (åŸºäºçœŸå®äººé€ å…‰æºé—ªçƒé¢‘ç‡)  
  flare_synthesis:
    # çœŸå®ä¸–ç•Œäººé€ å…‰æºé—ªçƒé¢‘ç‡
    realistic_frequencies:
      power_50hz: 100.0                  # 50Hzç”µç½‘å›½å®¶: è§å…‰ç¯ã€LEDé—ªçƒ100Hz
      power_60hz: 120.0                  # 60Hzç”µç½‘å›½å®¶: è§å…‰ç¯ã€LEDé—ªçƒ120Hz
      japan_east: 100.0                  # æ—¥æœ¬ä¸œéƒ¨
      japan_west: 120.0                  # æ—¥æœ¬è¥¿éƒ¨
    
    frequency_variation: 5.0             # Â±5Hzéšæœºå˜åŒ–
    min_samples_per_cycle: 48            # æ¯ä¸ªé—ªçƒå‘¨æœŸæœ€å°‘é‡‡æ ·ç‚¹æ•°
    max_fps: 6000                        # æœ€å¤§å¸§ç‡é™åˆ¶
    
    flicker_curves: ["sine", "square", "triangle", "exponential"]
    position_random: true                # éšæœºflareä½ç½®
    intensity_scale: [0.8, 1.2]        # å¼ºåº¦ç¼©æ”¾èŒƒå›´
    duration_range: [0.03, 0.08]       # ç‚«å…‰åºåˆ—æ—¶é•¿èŒƒå›´ 30-80ms
    
    # çœŸå®äººé€ å…‰æºå¼ºåº¦èŒƒå›´
    min_intensity_baseline: [0.0, 0.7]  # æœ€ä½å¼ºåº¦éšæœºèŒƒå›´ (0-70%)
    max_intensity: 1.0                   # æœ€å¤§å¼ºåº¦ (100%)
  
  # äº‹ä»¶ç›¸æœºåˆ†è¾¨ç‡ (DSECåˆ†è¾¨ç‡)
  resolution_h: 480
  resolution_w: 640
  
  # åŸºç¡€å‚æ•°
  time_window_us: 1000000   # 1 second (ä¼šè¢«éšæœºåŒ–è¦†ç›–)
  sequence_length: 64       # åºåˆ—é•¿åº¦

# --- ç‰¹å¾æå–å™¨è®¾ç½® (Feature Extractor Settings) ---
feature_extractor:
  # PFD ç‰¹å¾æå–å‚æ•° (å½“å‰ç¦ç”¨ï¼Œä½¿ç”¨4Då¿«é€Ÿç‰¹å¾)
  pfd_time_window: 25000      # Time window for Mf calculation (25ms in Âµs)
  pfd_neighborhood_size: 3    # Neighborhood size for PFD features (1=1x1, 3=3x3, 5=5x5)
  
  # åŸæœ‰å‚æ•° (ä¿æŒå‘åå…¼å®¹)
  coarse_time_window: 2000    # (Î´tc, in Âµs)
  coarse_support_threshold: 1 # (Î¼)
  coarse_neighborhood_size: 3 # (n x n)
  fine_time_window: 30000     # (Î´tf, in Âµs)
  fine_neighborhood_size: 3   # (n x n)

# --- æ•°æ®ç”Ÿæˆè®¾ç½® (Data Generation Settings) ---
generation:
  # è®­ç»ƒæ•°æ®ç”Ÿæˆæ•°é‡
  num_train_sequences: 10      # ç”Ÿæˆè®­ç»ƒåºåˆ—æ•°é‡
  num_val_sequences: 5         # ç”ŸæˆéªŒè¯åºåˆ—æ•°é‡  
  num_test_sequences: 0        # ç”Ÿæˆæµ‹è¯•åºåˆ—æ•°é‡ (å¯é€‰)
  
  # Debugæ¨¡å¼è®¾ç½®
  debug_mode: false            # æ˜¯å¦å¯ç”¨debugå¯è§†åŒ–
  debug_sequences: 8           # debugæ¨¡å¼ä¸‹çš„åºåˆ—æ•°é‡
  debug_subdivisions: [0.5, 1, 2, 4]  # debugæ—¶é—´çª—å£ç»†åˆ†