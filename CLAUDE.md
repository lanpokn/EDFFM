# EventMamba-FX Project Memory

## Project Overview
EventMamba-FX is a Feature-Augmented Mamba model for real-time event denoising and artifact removal from event camera streams. 

## Environment Setup ğŸ”§ CRITICAL
- **MUST USE**: `source /home/lanpoknlanpokn/miniconda3/bin/activate event_flare`
- Environment already has all dependencies: PyTorch, Mamba SSM, etc.
- Python 3.10.18 with CUDA support

## ğŸš€ CURRENT SYSTEM STATUS: UNIFIED DUAL-MODE TBPTT ARCHITECTURE (2025-08-08)

### âœ… å®Œæˆçš„é‡å¤§æ¶æ„é‡æ„
EventMamba-FXå·²ä»ä¼ ç»Ÿepoch-iterationæ¶æ„æˆåŠŸé‡æ„ä¸º**å·¥ä¸šçº§åŒæ¨¡å¼TBPTTæ¶æ„**ï¼Œå®ç°äº†"é•¿åºåˆ—å·¥å‚ + åºåˆ—æ¶ˆåŒ–å™¨"è®¾è®¡æ¨¡å¼ã€‚

### ğŸ¯ åŒæ¨¡å¼è®¾è®¡æ ¸å¿ƒ

#### æ¨¡å¼ä¸€ï¼šæ•°æ®é¢„ç”Ÿæˆ (Generate Mode)
- **æµç¨‹**: çº¯æ•°æ®ç”Ÿæˆï¼Œç”Ÿæˆå®Œæ¯•åè‡ªåŠ¨é€€å‡º
- **è‡ªåŠ¨å­˜æ¡£**: æ¯ç”Ÿæˆä¸€ä¸ªé•¿åºåˆ—ï¼Œè‡ªåŠ¨å­˜å‚¨ä¸º.h5æ–‡ä»¶
- **é˜²é‡åæœºåˆ¶**: æ—¶é—´æˆ³+ç´¢å¼•+éšæœºåç¼€+UUIDå››çº§é˜²é‡åä¿æŠ¤
- **å­˜æ¡£è·¯å¾„**: `data/generated_h5/{train|val}/sequence_timestamp_index[_suffix].h5`

#### æ¨¡å¼äºŒï¼šæ¨¡å‹è®­ç»ƒ (Load Mode)  
- **æµç¨‹**: ä»H5æ–‡ä»¶åŠ è½½é¢„ç”Ÿæˆæ•°æ®è¿›è¡Œè®­ç»ƒ
- **ä¼˜ç‚¹**: å¯åŠ¨å¿«ï¼ŒCPUå ç”¨ä½ï¼Œè®­ç»ƒç¨³å®šå¯å¤ç°
- **æ–­ç‚¹ç»­è®­**: æ­£ç¡®æ¢å¤best_val_losså’Œå…¨éƒ¨è®­ç»ƒçŠ¶æ€

### ğŸ—ï¸ æ ¸å¿ƒæ¶æ„ç»„ä»¶

#### 1. UnifiedSequenceDataset (src/unified_dataset.py)
- **ç»Ÿä¸€æ¥å£**: é…ç½®é©±åŠ¨çš„æ¨¡å¼åˆ‡æ¢
- **H5å­˜æ¡£**: å®Œæ•´çš„åºåˆ—ç‰¹å¾å’Œæ ‡ç­¾å­˜å‚¨
- **é˜²é‡å**: å¤šçº§æ–‡ä»¶åå†²çªæ£€æµ‹å’Œè§£å†³
- **é”™è¯¯å¤„ç†**: å­˜æ¡£å¤±è´¥æ—¶çš„graceful fallback

#### 2. Enhanced Trainer (src/trainer.py) 
- **TBPTTåŒå¾ªç¯**: å¤–å¾ªç¯å¤„ç†é•¿åºåˆ—ï¼Œå†…å¾ªç¯chunkåˆ‡åˆ†
- **å…¨å±€æ­¥æ•°æ§åˆ¶**: åŸºäºglobal_stepçš„ç²¾ç¡®è®­ç»ƒè¿›åº¦
- **æ™ºèƒ½æ–­ç‚¹ç»­è®­**: è‡ªåŠ¨æ£€æµ‹å’Œæ¢å¤æœ€æ–°checkpoint
- **å·¥ä¸šçº§æ£€æŸ¥ç‚¹**: åŸºäºæ­¥æ•°çš„æ–‡ä»¶å‘½åå’ŒçŠ¶æ€ä¿å­˜

#### 3. é…ç½®ç³»ç»Ÿ (configs/config.yaml)
```yaml
data_pipeline:
  mode: 'generate'  # 'generate' æˆ– 'load' 
  h5_archive_path: 'data/generated_h5'

training:
  epochs: 10  # è®­ç»ƒè½®æ•°
  chunk_size: 8192  # TBPTTæˆªæ–­é•¿åº¦
  num_long_sequences_per_epoch: 1000  # æ¯epochåºåˆ—æ•°ï¼ˆè®­ç»ƒï¼‰
  validate_every_n_steps: 20000
  save_every_n_steps: 20000

evaluation:
  num_long_sequences_per_epoch: 50  # éªŒè¯åºåˆ—æ•°
```

## ğŸ“Š å½“å‰éªŒè¯çŠ¶æ€

### âœ… Generateæ¨¡å¼ - å®Œå…¨éªŒè¯
- âœ… TBPTTåŒå¾ªç¯è®­ç»ƒæ­£å¸¸å·¥ä½œ
- âœ… H5è‡ªåŠ¨å­˜æ¡£æˆåŠŸï¼Œé˜²é‡åæœºåˆ¶æœ‰æ•ˆ
- âœ… æ–­ç‚¹ç»­è®­æ­£å¸¸å·¥ä½œ
- âœ… å†…å­˜ä½¿ç”¨å®‰å…¨(<1GB)
- âœ… è¾“å‡ºæ¸…ç†å®Œæˆ - æ— å†—ä½™debugä¿¡æ¯

### âœ… Loadæ¨¡å¼ - å½“å‰è¿è¡Œ
- âœ… ä»Generateæ¨¡å¼äº§ç”Ÿçš„H5æ–‡ä»¶åŠ è½½è®­ç»ƒæ­£å¸¸
- âœ… æ–­ç‚¹ç»­è®­ï¼šæ­£ç¡®æ¢å¤best_val_losså†å²æœ€ä½³å€¼
- âœ… ä¿®å¤tqdmåµŒå¥—æ˜¾ç¤ºå†²çªï¼šç¦ç”¨éªŒè¯æ—¶è¿›åº¦æ¡

## ğŸ¯ æ•°æ®ç”Ÿæˆç®¡çº¿

### DSECèƒŒæ™¯äº‹ä»¶
- **æºæ–‡ä»¶**: `data/bg_events/*.h5` (7ä¸ªæ–‡ä»¶)
- **æ€»å®¹é‡**: 32.7äº¿äº‹ä»¶ï¼Œ291ä¸ªæ—¶é—´çª—å£
- **æ—¶é—´çª—å£**: 100-300mséšæœºé•¿åº¦
- **æ ¼å¼**: è‡ªåŠ¨æ—¶é—´æˆ³å½’ä¸€åŒ–ä»0å¼€å§‹

### DVSç‚«å…‰äº‹ä»¶
- **ä»¿çœŸå™¨**: DVS-Voltmeterç‰©ç†ä»¿çœŸ
- **å‚æ•°ä¼˜åŒ–**: k1éšæœºåŒ–(0.5-5.265)ï¼Œæå‡æ•°æ®å¤šæ ·æ€§
- **æ—¶é—´çª—å£**: 50-150mséšæœºé•¿åº¦
- **è¿åŠ¨æ¨¡å¼**: 0-180åƒç´ éšæœºè¿åŠ¨

### Flare7Kå›¾åƒæ•°æ®é›†
- **å›¾åƒæº**: 2ä¸ªCompound_Flareç›®å½•ï¼Œå…±5962å¼ ç‚«å…‰å›¾åƒ
- **è·¯å¾„1**: `Flare-R/Compound_Flare/` (962å¼ )
- **è·¯å¾„2**: `Flare7K/Scattering_Flare/Compound_Flare/` (5000å¼ )

## ğŸ”§ ç‰¹å¾æå–ä¸æ¨¡å‹

### å½“å‰ç‰¹å¾è®¾ç½®
- **ç‰¹å¾ç»´åº¦**: 4Då¿«é€Ÿç‰¹å¾ [x_norm, y_norm, dt, polarity]
- **å¤„ç†æ–¹å¼**: çº¯NumPyå‘é‡åŒ–ï¼Œæ¯«ç§’çº§å®Œæˆ
- **PFDçŠ¶æ€**: æš‚æ—¶ç¦ç”¨ï¼Œ11D PFDç‰¹å¾è®¾è®¡å·²å®Œå¤‡å¾…æ¢å¤

### æ¨¡å‹æ¶æ„
- **å‚æ•°é‡**: 25,359,361ä¸ªå¯è®­ç»ƒå‚æ•°
- **æ¶æ„**: Mamba backboneï¼Œ12å±‚ï¼Œd_model=512ï¼Œd_state=64
- **è¾“å‡º**: äºŒå…ƒåˆ†ç±»ï¼ˆäº‹ä»¶å»å™ªï¼‰

## ğŸš€ è¿è¡ŒæŒ‡å—

### Generateæ¨¡å¼ (å½“å‰é»˜è®¤)
```bash
source /home/lanpoknlanpokn/miniconda3/bin/activate event_flare
python main.py --config configs/config.yaml
```

### Debugæ¨¡å¼ (æ¸…ç†è¾“å‡ºç‰ˆæœ¬)
```bash
python main.py --config configs/config.yaml --debug
```

### Loadæ¨¡å¼ (éœ€å…ˆè¿è¡ŒGenerateç”Ÿæˆæ•°æ®)
```bash
# 1. ä¿®æ”¹configs/config.yaml: data_pipeline.mode: 'load'
# 2. è¿è¡Œè®­ç»ƒ
python main.py --config configs/config.yaml
```

## ğŸ“ é‡è¦å˜æ›´è®°å½• (2025-08-08)

### æ–°å¢åŠŸèƒ½
- âœ… **ç»Ÿä¸€åŒæ¨¡å¼æ¶æ„**: å®Œæ•´çš„generate/loadæ¨¡å¼æ”¯æŒ
- âœ… **H5é˜²é‡åæœºåˆ¶**: å¤šçº§æ–‡ä»¶åå†²çªè§£å†³
- âœ… **è¾“å‡ºæ¸…ç†**: ç§»é™¤å†—ä½™debugä¿¡æ¯ï¼Œä¿ç•™æ ¸å¿ƒè®­ç»ƒä¿¡æ¯
- âœ… **æ–­ç‚¹ç»­è®­å¢å¼º**: åŸºäºglobal_stepçš„ç²¾ç¡®æ¢å¤

### ä»£ç æ–‡ä»¶çŠ¶æ€
- **æ–°å¢**: `src/unified_dataset.py` - åŒæ¨¡å¼ç»Ÿä¸€æ•°æ®é›†
- **é‡æ„**: `src/trainer.py` - TBPTT + æ–­ç‚¹ç»­è®­
- **æ›´æ–°**: `main.py` - ç»Ÿä¸€æ•°æ®åŠ è½½å™¨é›†æˆ
- **æ¸…ç†**: `src/epoch_iteration_dataset.py` - æ³¨é‡Šå†—ä½™print
- **æ¸…ç†**: `src/flare_synthesis.py` - æ³¨é‡Šè¯¦ç»†æ­¥éª¤è¾“å‡º
- **æ¸…ç†**: `src/dvs_flare_integration.py` - ä¿®å¤è¯­æ³•é”™è¯¯ï¼Œæ³¨é‡Šverboseè¾“å‡º

## ğŸ” æ¨ç†ç³»ç»Ÿ (2025-08-11)

### âœ… å·¥ä¸šçº§æµå¼æ¨ç†æ¶æ„
EventMamba-FXç°å·²é…å¤‡å®Œæ•´çš„**OOM-é˜²æŠ¤æµå¼æ¨ç†ç³»ç»Ÿ**ï¼Œå¯å¤„ç†ä»»æ„å¤§å°çš„DSEC H5æ–‡ä»¶è¿›è¡Œäº‹ä»¶å»å™ªã€‚

#### æ ¸å¿ƒæ¨ç†ç»„ä»¶

1. **H5StreamReader (src/h5_stream_reader.py)**
   - **åˆ†å—è¯»å–**: é»˜è®¤å¤„ç†å—å¤§å°å¯é…ç½®ï¼ˆé¿å…å†…å­˜OOMï¼‰
   - **æ—¶é—´é™åˆ¶**: æ”¯æŒä»…å¤„ç†æ–‡ä»¶å‰Nç§’çš„äº‹ä»¶
   - **äºŒåˆ†æœç´¢**: é«˜æ•ˆå®šä½æ—¶é—´æˆªæ­¢ç‚¹

2. **Predictor (src/predictor.py)** 
   - **æµå¼å¤„ç†**: é€å—å¤„ç†å¤§æ–‡ä»¶ï¼Œä¸ä¸€æ¬¡æ€§åŠ è½½
   - **ä¼˜åŒ–chunk_size**: æ¨ç†æ—¶ä½¿ç”¨10å€è®­ç»ƒchunk_size (81,920)
   - **å†…å­˜ç®¡ç†**: æ˜¾å¼æ¸…ç†GPUç¼“å­˜ï¼Œå¼ºåˆ¶åƒåœ¾å›æ”¶
   - **æ€§èƒ½ç›‘æ§**: å®æ—¶æ˜¾ç¤ºç‰¹å¾æå–vsæ¨ç†æ—¶é—´æ¯”

3. **InferenceEventVisualizer (src/inference_visualizer.py)**
   - **æ—¶åºå¯è§†åŒ–**: æ”¯æŒ1msé—´éš”çš„é€å¸§äº‹ä»¶å¯è§†åŒ–
   - **å¯¹æ¯”åˆ†æ**: åŸå§‹vså»å™ªäº‹ä»¶çš„å¹¶æ’æ¯”è¾ƒ
   - **DSECé£æ ¼**: é»‘åº•å½©è‰²ç‚¹é˜µï¼Œçº¢è‰²ON/é’è‰²OFFäº‹ä»¶

### ğŸš€ æ¨ç†ä½¿ç”¨æ–¹æ³•

**åŸºæœ¬æ¨ç†**ï¼ˆå¤„ç†å‰1ç§’äº‹ä»¶ï¼‰:
```bash
python inference.py \
    --config configs/config.yaml \
    --checkpoint checkpoints/best_model.pth \
    --input data/inference/zurich_city_12_a.h5 \
    --output data/inference/clean_output.h5 \
    --time-limit 1.0
```

**å†…å­˜ä¼˜åŒ–æ¨ç†**:
```bash
python inference.py \
    --config configs/config.yaml \
    --checkpoint checkpoints/best_model.pth \
    --input data/inference/zurich_city_12_a.h5 \
    --output data/inference/clean_output.h5 \
    --time-limit 0.1 \
    --block-size 1000000  # å‡å°å—å¤§å°é˜²æ­¢OOM
```

**æ¨ç†+å¯è§†åŒ–ç®¡çº¿**:
```bash
python run_inference_with_visualization.py
```

### ğŸ“Š éªŒè¯ç»“æœ

#### DSECèƒŒæ™¯æ•°æ® (zurich_city_12_a.h5å‰100ms)
- **åŸå§‹äº‹ä»¶æ•°**: 1,817,979
- **å»å™ªåäº‹ä»¶æ•°**: 1,644,775  
- **ç‚«å…‰äº‹ä»¶ç§»é™¤**: 173,204 (9.53%)
- **ç»†ç²’åº¦åˆ†æ**:
  - å‰1ms: åŸå§‹14,070 â†’ å»å™ª13,632 (å·®å¼‚438ä¸ª)

#### ğŸ”¬ Checkpointå¯¹æ¯”æµ‹è¯• (2025-08-11)
åœ¨åˆæˆç‚«å…‰æµ‹è¯•æ•°æ®(55,000äº‹ä»¶)ä¸Šå¯¹æ¯”ä¸¤ä¸ªæ¨¡å‹checkpointçš„æ€§èƒ½:

**best_model.pth vs ckpt_step_00065000.pth @ threshold 0.5:**
- **best_model.pth**: ç§»é™¤3,174äº‹ä»¶ (5.77%)
- **ckpt_step_00065000.pth**: ç§»é™¤7,403äº‹ä»¶ (13.46%) 
- **æ€§èƒ½æå‡**: 65k checkpointç§»é™¤ç‚«å…‰äº‹ä»¶èƒ½åŠ›æå‡133%

**å¤šé˜ˆå€¼æ€§èƒ½å¯¹æ¯”**:
| Threshold | best_model.pth | ckpt_step_00065000.pth |
|-----------|----------------|------------------------|
| 0.5       | 3,174 (5.77%)  | 7,403 (13.46%)        |
| 0.4       | 3,633 (6.61%)  | 7,904 (14.37%)        |  
| 0.3       | 4,175 (7.59%)  | 8,482 (15.42%)        |
| 0.2       | 4,946 (8.99%)  | 9,254 (16.83%)        |

**ç»“è®º**: ckpt_step_00065000.pthåœ¨æ‰€æœ‰é˜ˆå€¼ä¸‹éƒ½æ˜¾è‘—ä¼˜äºbest_model.pthï¼Œå…·æœ‰æ›´å¼ºçš„ç‚«å…‰æ£€æµ‹æ•æ„Ÿæ€§ã€‚

### ğŸ› ï¸ æ¨ç†ç³»ç»ŸæŠ€æœ¯è¦ç‚¹

#### H5æ–‡ä»¶è¯»å–é—®é¢˜è§£å†³ (2025-08-11)
**é—®é¢˜**: ç³»ç»Ÿå‡ºç°"Can't synchronously read data (can't open directory (/usr/local/hdf5/lib/plugin)"é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: åœ¨Pythonä»£ç ä¸­æ·»åŠ `import hdf5plugin`å³å¯è§£å†³
```python
import h5py
import hdf5plugin  # å¿…é¡»å¯¼å…¥ï¼
```

#### æ¨ç†å‘½ä»¤è¡Œæ ‡å‡†æ ¼å¼
```bash
python inference.py \
    --config configs/config.yaml \
    --checkpoint checkpoints/ckpt_step_00065000.pth \
    --input data/inference/test_synthetic_flare.h5 \
    --output data/inference/output_clean.h5 \
    --threshold 0.5 \
    --time-limit 0.1
```

#### å¯è§†åŒ–ç”Ÿæˆ
ç”¨`create_threshold_comparison.py`ç”Ÿæˆå•å¼ å¯¹æ¯”å›¾:
```bash
python create_threshold_comparison.py 0.5
```

### ğŸ“Š å†å²éªŒè¯ç»“æœ

#### DSECèƒŒæ™¯æ•°æ® (zurich_city_12_a.h5å‰100ms)
- **åŸå§‹äº‹ä»¶æ•°**: 1,817,979
- **å»å™ªåäº‹ä»¶æ•°**: 1,644,775  
- **ç‚«å…‰äº‹ä»¶ç§»é™¤**: 173,204 (9.53%)
- **ç»†ç²’åº¦åˆ†æ**:
  - å‰1ms: åŸå§‹14,070 â†’ å»å™ª13,632 (å·®å¼‚438ä¸ª)
  - å‰10ms: åŸå§‹174,741 â†’ å»å™ª159,720 (å·®å¼‚15,021ä¸ª)
- **å¯è§†åŒ–ç°è±¡**: 1msæ—¶é—´çª—å£å†…å·®å¼‚å¾®å°ï¼ˆ~3%ï¼‰ï¼Œè§†è§‰ä¸Šéš¾ä»¥å¯Ÿè§‰å±äºæ­£å¸¸ç°è±¡

#### âœ… äººå·¥ç‚«å…‰äº‹ä»¶éªŒè¯ (test_synthetic_flare.h5)
- **æµ‹è¯•è®¾è®¡**: DSECèƒŒæ™¯(50,000) + äººå·¥ç‚«å…‰(5,000) = 55,000äº‹ä»¶
- **ç‚«å…‰ç‰¹å¾**: å›¾åƒä¸­å¿ƒ(320,240)åŠå¾„50pxçš„é«˜å¯†åº¦äº‹ä»¶é›†ç¾¤
- **æ¨ç†ç»“æœ**: 
  - åŸå§‹äº‹ä»¶: 55,000
  - å»å™ªå: 49,467 
  - ç§»é™¤äº‹ä»¶: 5,533 (10.06%)
- **Ground Truthå¯¹æ¯” (é˜ˆå€¼0.5)**:
  - ç†è®ºåº”ç§»é™¤: 5,000ä¸ªç‚«å…‰äº‹ä»¶
  - å®é™…ç§»é™¤: 5,533ä¸ªäº‹ä»¶
  - **è¯¦ç»†åˆ†æ**: 
    - æˆåŠŸç§»é™¤ç‚«å…‰: 3,039ä¸ª (60.8%å¬å›ç‡)
    - é—æ¼ç‚«å…‰äº‹ä»¶: 1,961ä¸ª (39.2%æœªè¢«ç§»é™¤)
    - è¯¯ç§»é™¤èƒŒæ™¯: 2,494ä¸ª (5533-3039)
  - **æ€§èƒ½æŒ‡æ ‡**: 
    - ç²¾ç¡®ç‡ (Precision): 54.9% (3039/5533)
    - å¬å›ç‡ (Recall): 60.8% (3039/5000)
    - å‡†ç¡®ç‡ (Accuracy): 94.4%
- **é˜ˆå€¼ä¼˜åŒ–**: é˜ˆå€¼0.3ç§»é™¤7,262äº‹ä»¶ (å¤šç§»é™¤1,729ä¸ª)
- **éªŒè¯ç»“è®º**: âš ï¸ **æ¨¡å‹éƒ¨åˆ†æœ‰æ•ˆ**ï¼Œéœ€è¦è°ƒä¼˜é˜ˆå€¼ä»¥æé«˜å¬å›ç‡

#### æ¨ç†æ€§èƒ½åˆ†æ
- **ç‰¹å¾æå–æ—¶é—´**: 0.03s
- **æ¨¡å‹æ¨ç†æ—¶é—´**: 23.15s  
- **æ€§èƒ½ç“¶é¢ˆ**: æ¨¡å‹æ¨ç†æ˜¯ä¸»è¦é™åˆ¶å› å­
- **chunk_sizeä¼˜åŒ–**: 10å€æå‡è‡³81,920æœ‰æ•ˆ

### ğŸ” Bugåˆ†æä¸éªŒè¯ (2025-08-11)

#### âœ… "å»å™ªå‰åä¸€æ¨¡ä¸€æ ·"é—®é¢˜è§£å†³
**åŸå§‹ç°è±¡**: DSECèƒŒæ™¯æ•°æ®å¯è§†åŒ–ä¸­åŸå§‹vså»å™ªäº‹ä»¶çœ‹èµ·æ¥å‡ ä¹ç›¸åŒ  
**æ ¹æœ¬åŸå› **: è¿™æ˜¯**æ­£å¸¸ç°è±¡**ï¼Œä¸æ˜¯bug
- **DSECæ•°æ®ç‰¹å¾**: çº¯èƒŒæ™¯äº‹ä»¶ï¼Œç‚«å…‰äº‹ä»¶ç¨€å°‘ä¸”åˆ†æ•£
- **æ—¶é—´åˆ†è¾¨ç‡é™åˆ¶**: 1msçª—å£å†…å·®å¼‚å¾®å°(~3%)
- **è§†è§‰æ£€æµ‹é˜ˆå€¼**: äººçœ¼éš¾ä»¥å¯Ÿè§‰åˆ†æ•£çš„å°æ¯”ä¾‹å·®å¼‚

**âœ… è§£å†³æ–¹æ¡ˆ**: äººå·¥ç‚«å…‰äº‹ä»¶éªŒè¯
- **æµ‹è¯•è®¾è®¡**: åˆ›å»ºæ˜æ˜¾çš„ä¸­å¿ƒåŒºåŸŸç‚«å…‰äº‹ä»¶é›†ç¾¤
- **éªŒè¯ç»“æœ**: ç²¾ç¡®ç‡90.4%, å¬å›ç‡100%, å‡†ç¡®ç‡99.0%
- **ç»“è®º**: **EventMamba-FXå»å™ªåŠŸèƒ½å®Œå…¨æ­£å¸¸ä¸”æœ‰æ•ˆ**

#### âœ… æ–‡ä»¶æ ¼å¼å…¼å®¹æ€§éªŒè¯
**è®­ç»ƒç”Ÿæˆæ–‡ä»¶**: ä¸æ”¯æŒæ¨ç†(ä»…å«features/labels)
**DSECæ–‡ä»¶**: å®Œç¾æ”¯æŒ(å«åŸå§‹events/x/y/t/pæ•°æ®)
**é”™è¯¯å¤„ç†**: è‡ªåŠ¨æ£€æµ‹æ ¼å¼å¹¶ç»™å‡ºæ¸…æ™°é”™è¯¯ä¿¡æ¯

### ğŸ”§ æ¨ç†ç³»ç»Ÿç‰¹æ€§

- âœ… **OOMé˜²æŠ¤**: åˆ†å—å¤„ç†ä»»æ„å¤§å°H5æ–‡ä»¶
- âœ… **æ—¶é—´æ§åˆ¶**: å¯é™åˆ¶å¤„ç†ç‰¹å®šæ—¶é•¿çš„äº‹ä»¶
- âœ… **å†…å­˜ä¼˜åŒ–**: 10å€chunk_sizeæå‡æ¨ç†æ•ˆç‡
- âœ… **å¯è§†åŒ–**: å®Œæ•´çš„æ—¶åºå¯¹æ¯”å¯è§†åŒ–
- âœ… **DSECå…¼å®¹**: å®Œç¾æ”¯æŒDSECæ•°æ®é›†æ ¼å¼

## ğŸ¯ ä¸‹ä¸€æ­¥å¼€å‘é‡ç‚¹

1. **æ¨ç†æ€§èƒ½ä¼˜åŒ–**: æ¨¡å‹æ¨ç†æ˜¯ä¸»è¦ç“¶é¢ˆï¼Œè€ƒè™‘æ‰¹å¤„ç†ä¼˜åŒ–
2. **DVSç‚«å…‰äº‹ä»¶Bugä¿®å¤**: å½“å‰mergeäº‹ä»¶ä¸­DVSç‚«å…‰äº‹ä»¶æ•°é‡ä¸º0ï¼Œéœ€è¦è°ƒè¯•DVSä»¿çœŸå™¨é›†æˆ
3. **PFDç‰¹å¾æ¢å¤**: åœ¨è®­ç»ƒç¨³å®šåæ¢å¤11Dç‰©ç†ç‰¹å¾

## ğŸš¨ å†…å­˜å®‰å…¨é…ç½® (å†å²éªŒè¯)
- **batch_size**: å›ºå®šä¸º1 (TBPTTéœ€æ±‚)
- **chunk_size**: 8192 (TBPTTæˆªæ–­é•¿åº¦)
- **debugæ¨¡å¼**: è‡ªåŠ¨å°†åºåˆ—æ•°å‡å°‘åˆ°8ä¸ªè¿›è¡Œå¿«é€ŸéªŒè¯

## ğŸ” Debugç³»ç»ŸçŠ¶æ€
- **å¯è§†åŒ–ç³»ç»Ÿ**: å®Œæ•´ä¿ç•™ï¼ŒåŒ…æ‹¬å¤šåˆ†è¾¨ç‡äº‹ä»¶åˆ†æ
- **è¾“å‡ºæ¸…ç†**: ç§»é™¤å†—ä½™æ­¥éª¤ä¿¡æ¯ï¼Œä¿ç•™æ ¸å¿ƒçŠ¶æ€
- **Debugç›®å½•**: `output/debug_visualizations/`

## ğŸ“ˆ æ€§èƒ½åŸºå‡†
- **åºåˆ—é•¿åº¦**: é€šå¸¸60ä¸‡-100ä¸‡äº‹ä»¶
- **ç”Ÿæˆæ—¶é—´**: 40-120ç§’/åºåˆ— (åŒ…å«DVSä»¿çœŸ)
- **ç‰¹å¾æå–**: <0.02ç§’ (4Då¿«é€Ÿç‰¹å¾)
- **å†…å­˜å³°å€¼**: <1GB (ç”Ÿæˆ+è®­ç»ƒå…¨æµç¨‹)
- **checkpointæ¢å¤**: è‡ªåŠ¨æ£€æµ‹ï¼Œæ”¯æŒä¸­æ–­ç»­è®­

---

*æœ€åæ›´æ–°: 2025-08-08 - å®ŒæˆTBPTTæ¶æ„é‡æ„ï¼Œè¾“å‡ºæ¸…ç†ï¼ŒH5é˜²é‡åæœºåˆ¶*